### Анонимные классы и лямбда-выражения в Java

В современном программировании на Java анонимные классы и лямбда-выражения играют важную роль, особенно при работе с функциональными интерфейсами и обработчиками событий. Эти конструкции позволяют писать более компактный и читабельный код, уменьшая количество шаблонного кода и улучшая его поддержку. В этом разделе мы рассмотрим, что такое анонимные классы и лямбда-выражения, их особенности, преимущества, а также приведем примеры их применения.

---

### 1. **Анонимные классы**

**Анонимный класс** — это локальный класс без имени, который объявляется и создается одновременно. Обычно анонимные классы используются для реализации интерфейсов или наследования от классов для выполнения одноразовых задач, таких как обработка событий или выполнение определенной логики.

#### Основные особенности анонимных классов:
- **Безымянность**: Класс не имеет имени и объявляется непосредственно в месте использования.
- **Единоразовое использование**: Обычно используются для реализации интерфейсов или абстрактных классов, когда требуется однократная реализация.
- **Доступ к переменным внешнего класса**: Могут обращаться к финальным или эффективно финальным переменным внешнего класса.

#### Пример использования анонимного класса:

Рассмотрим пример использования анонимного класса для обработки события нажатия кнопки в графическом интерфейсе.

```java
import javax.swing.JButton;
import javax.swing.JFrame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class AnonymousClassExample {
    public static void main(String[] args) {
        JFrame frame = new JFrame("Анонимный класс пример");
        JButton button = new JButton("Нажми меня");

        // Использование анонимного класса для обработки события ActionListener
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println("Кнопка нажата!");
            }
        });

        frame.add(button);
        frame.setSize(300, 200);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
}
```

В этом примере анонимный класс реализует интерфейс `ActionListener` и переопределяет метод `actionPerformed`, который выводит сообщение при нажатии кнопки.

---

### 2. **Лямбда-выражения**

**Лямбда-выражение** — это упрощенная форма записи реализации функционального интерфейса (интерфейса с одним абстрактным методом). Лямбда-выражения были введены в Java 8 и позволяют писать более компактный и выразительный код, особенно при работе с коллекциями и потоками данных.

#### Основные особенности лямбда-выражений:
- **Краткость**: Лямбда-выражения позволяют сократить объем кода, убирая необходимость в создании отдельных классов или анонимных классов.
- **Функциональный стиль**: Поддерживают функциональное программирование, делая код более декларативным.
- **Совместимость с функциональными интерфейсами**: Могут использоваться там, где ожидается функциональный интерфейс.

#### Синтаксис лямбда-выражений:

Основной синтаксис лямбда-выражения состоит из списка параметров, оператора `->` и тела выражения или блока кода.

```java
(parameters) -> expression
(parameters) -> { statements; }
```

#### Пример использования лямбда-выражения:

Рассмотрим тот же пример обработки события нажатия кнопки, но с использованием лямбда-выражения.

```java
import javax.swing.JButton;
import javax.swing.JFrame;

public class LambdaExample {
    public static void main(String[] args) {
        JFrame frame = new JFrame("Лямбда пример");
        JButton button = new JButton("Нажми меня");

        // Использование лямбда-выражения для обработки события ActionListener
        button.addActionListener(e -> System.out.println("Кнопка нажата!"));

        frame.add(button);
        frame.setSize(300, 200);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
}
```

В этом примере лямбда-выражение заменяет анонимный класс, делая код более компактным и читабельным.

---

### 3. **Сравнение анонимных классов и лямбда-выражений**

| **Особенность**                | **Анонимные классы**                                         | **Лямбда-выражения**                                       |
|--------------------------------|--------------------------------------------------------------|------------------------------------------------------------|
| **Синтаксис**                  | Требует объявления класса и переопределения методов         | Краткий и лаконичный синтаксис                              |
| **Использование**              | Подходит для реализации интерфейсов с несколькими методами  | Подходит только для функциональных интерфейсов             |
| **Доступ к переменным**        | Могут обращаться к финальным или эффективно финальным переменным | Могут обращаться к финальным или эффективно финальным переменным |
| **Возможности**                | Позволяют объявлять дополнительные методы и поля           | Не поддерживают дополнительные методы и поля               |
| **Производительность**         | Немного медленнее из-за создания отдельного класса          | Более производительны за счет использования лямбда-выражений |

---

### 4. **Применение лямбда-выражений с коллекциями**

Одним из основных применений лямбда-выражений является работа с коллекциями, особенно при использовании Stream API, который также был введен в Java 8.

#### Пример фильтрации и сортировки списка с использованием лямбда-выражений:

```java
import java.util.ArrayList;
import java.util.List;
import java.util.stream.Collectors;

public class LambdaCollectionExample {
    public static void main(String[] args) {
        List<String> names = new ArrayList<>();
        names.add("Анна");
        names.add("Борис");
        names.add("Виктор");
        names.add("Галина");
        names.add("Дмитрий");

        // Фильтрация имен, начинающихся с буквы 'В', и сортировка по длине
        List<String> filteredNames = names.stream()
                .filter(name -> name.startsWith("В"))
                .sorted((a, b) -> a.length() - b.length())
                .collect(Collectors.toList());

        System.out.println("Отфильтрованные имена: " + filteredNames);
    }
}
```

**Вывод:**
```
Отфильтрованные имена: [Виктор]
```

В этом примере мы используем лямбда-выражения для фильтрации списка имен, выбирая только те, которые начинаются с буквы "В", и сортируем их по длине.

---

### 5. **Функциональные интерфейсы**

Лямбда-выражения тесно связаны с функциональными интерфейсами. **Функциональный интерфейс** — это интерфейс, содержащий ровно один абстрактный метод. Они могут содержать и другие методы, такие как методы по умолчанию или статические методы, но только один абстрактный метод.

#### Примеры стандартных функциональных интерфейсов в Java:

- `Runnable` — интерфейс с методом `run()`.
- `Callable<V>` — интерфейс с методом `call()`.
- `Comparator<T>` — интерфейс с методом `compare(T o1, T o2)`.
- `Function<T, R>` — интерфейс с методом `apply(T t)`.
- `Predicate<T>` — интерфейс с методом `test(T t)`.

#### Создание собственного функционального интерфейса:

Вы можете создавать собственные функциональные интерфейсы, используя аннотацию `@FunctionalInterface` для обозначения намерения.

```java
@FunctionalInterface
interface MyFunctionalInterface {
    void execute();
    
    // Можно добавлять методы по умолчанию или статические методы
    default void defaultMethod() {
        System.out.println("Это метод по умолчанию.");
    }
}
```

#### Пример использования собственного функционального интерфейса с лямбда-выражением:

```java
public class CustomFunctionalInterfaceExample {
    public static void main(String[] args) {
        // Реализация функционального интерфейса с помощью лямбда-выражения
        MyFunctionalInterface action = () -> System.out.println("Выполнение действия.");
        
        action.execute();           // Выведет: Выполнение действия.
        action.defaultMethod();     // Выведет: Это метод по умолчанию.
    }
}
```

---

### 6. **Преимущества использования лямбда-выражений**

- **Краткость**: Уменьшают объем кода, устраняя необходимость в создании отдельных классов или анонимных классов.
- **Читабельность**: Делают код более чистым и понятным, особенно при работе с потоками данных и коллекциями.
- **Функциональный стиль**: Поддерживают функциональное программирование, что позволяет писать более декларативный код.
- **Упрощение параллельных вычислений**: В сочетании с Stream API облегчают написание параллельных операций над коллекциями.

---

### 7. **Когда использовать анонимные классы, а когда лямбда-выражения?**

- **Использование анонимных классов**:
    - Когда требуется реализация интерфейса с несколькими методами.
    - Когда необходимо создать класс с дополнительными полями или методами.
    - Когда требуется более сложная логика, которая не может быть легко выражена в одной строке.

- **Использование лямбда-выражений**:
    - Когда требуется реализация функционального интерфейса (с одним абстрактным методом).
    - Для обработки событий и обратных вызовов, где логика может быть выражена компактно.
    - При работе с коллекциями и Stream API для фильтрации, сортировки и трансформации данных.

---

