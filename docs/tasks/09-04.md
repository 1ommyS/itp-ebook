
## Вариант 4. Библиотечная система

### 1. Цель и описание
Создать систему управления данными библиотеки, включающую книги, авторов и записи о выдаче книг читателям.

### 2. Структура БД
- **Таблица `books`:**
    - `id` – SERIAL PRIMARY KEY
    - `title` – VARCHAR(150)
    - `genre` – VARCHAR(50)
    - `publish_year` – INT

- **Таблица `authors`:**
    - `id` – SERIAL PRIMARY KEY
    - `first_name` – VARCHAR(50)
    - `last_name` – VARCHAR(50)
    - `birth_year` – INT

- **Таблица `book_loans`:**
    - `id` – SERIAL PRIMARY KEY
    - `book_id` – INT REFERENCES books(id)
    - `borrower_name` – VARCHAR(100)
    - `loan_date` – DATE
    - `return_date` – DATE

- **Таблица `book_authors`:** (связующая таблица для связи многие-ко-многим)
    - `book_id` – INT REFERENCES books(id)
    - `author_id` – INT REFERENCES authors(id)

### 3. Наполнение данными
- Добавьте не менее 15 книг.
- Добавьте не менее 10 авторов.
- Вставьте не менее 20 записей в `book_loans`.
- Свяжите книги с авторами через таблицу `book_authors` (каждая книга может иметь нескольких авторов).

### 4. SQL‑запросы

**Уровень 1 (базовые запросы):**
- Выборка всех книг, отсортированных по году публикации.
- Выборка авторов, фамилия которых начинается с определённой буквы.
- Выборка записей выдачи книг за последний месяц.

**Уровень 2 (запросы среднего уровня):**
- Подсчёт количества книг, выданных каждому читателю.
  
- Выборка книг, выпущенных после определённого года.
- Подсчёт количества книг для каждого жанра.

**Уровень 3 (запросы с JOIN):**
- Объединение таблиц `books` и `book_loans` для получения информации о выданных книгах.
- Объединение таблиц `books`, `book_authors` и `authors` для получения списка книг с именами авторов.
- Сложный запрос: список книг с количеством выдач и информацией об авторах, где книги были выданы более определённого числа раз.

---